<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>viSAM - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏</title>
    <meta name="description" content="–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ VISA –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞—è–≤–ª–µ–Ω–∏–π">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0052cc">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="viSAM">
    <link rel="apple-touch-icon" href="icon-512.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icon-512.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icon-512.png">
    <link rel="apple-touch-icon" sizes="167x167" href="icon-512.png">
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="viSAM">
    <meta name="msapplication-TileColor" content="#0052cc">
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Core Styles -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/animations.css">
</head>

<body>
    <!-- Decorative Background Elements -->
    <div class="bg-blob blob-1"></div>
    <div class="bg-blob blob-2"></div>
    <div class="bg-blob blob-3"></div>

    <!-- Screen 1: Home -->
    <div id="screen-home" class="screen active">
        <div class="container">
            <!-- Settings Button (Three Dots) -->
            <button class="settings-btn" onclick="toggleSettings()" aria-label="Settings" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                <span class="settings-icon">‚ãÆ</span>
            </button>

            <!-- VISA Logo Header -->
            <div class="visa-logo" onclick="openScanner()">
                <h1>VISA</h1>
            </div>

            <!-- Main Menu -->
            <nav class="main-menu glass-card">
                <button class="menu-item" onclick="showScreen('screen-documents')">
                    <span class="menu-icon">üìÑ</span>
                    <span class="menu-text" data-i18n="menu_docs">–°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</span>
                    <span class="menu-arrow">‚Ä∫</span>
                </button>

                <button class="menu-item" onclick="showScreen('screen-help')">
                    <span class="menu-icon">üí¨</span>
                    <span class="menu-text" data-i18n="menu_help">–ü–æ–º–æ—â—å</span>
                    <span class="menu-arrow">‚Ä∫</span>
                </button>

                <button class="menu-item" onclick="showScreen('screen-profile')">
                    <span class="menu-icon">üë§</span>
                    <span class="menu-text" data-i18n="menu_profile">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</span>
                    <span class="menu-arrow">‚Ä∫</span>
                </button>

                <button class="menu-item">
                    <span class="menu-icon">üìÖ</span>
                    <span class="menu-text" data-i18n="menu_apply">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø–æ–¥–∞—á—É</span>
                    <span class="menu-arrow">‚Ä∫</span>
                </button>
            </nav>

            <!-- Additional Info Section -->
            <div class="additional-section glass-card">
                <h3 data-i18n="home_add_title">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</h3>
                <p class="info-text" data-i18n="home_add_text">–ü–æ–º–æ—â—å –∏ –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫</p>
                <p class="info-text-small" data-i18n="home_add_hint">–£–¥–æ–±–Ω–æ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏</p>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn active" data-screen="screen-home">
                <span class="nav-icon">üîç</span>
                <span class="nav-label" data-i18n="nav_search">–ü–æ–∏—Å–∫</span>
            </button>
            <button class="nav-btn" data-screen="screen-documents">
                <span class="nav-icon">üìÑ</span>
                <span class="nav-label" data-i18n="nav_docs">–î–æ–∫—É–º–µ–Ω—Ç—ã</span>
            </button>
            <button class="nav-btn" data-screen="screen-profile">
                <span class="nav-icon">üë§</span>
                <span class="nav-label" data-i18n="nav_account">–ê–∫–∫–∞—É–Ω—Ç</span>
            </button>
        </nav>
    </div>

    <!-- Screen 2: Scan Documents -->
    <div id="screen-scan" class="screen">
        <div class="container dark-theme">
            <div class="scan-container">
                <div class="scan-preview">
                    <div class="scan-frame">
                        <div class="scan-placeholder">
                            <p data-i18n="scan_hint">–ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn" data-screen="screen-home">
                <span class="nav-icon">üîç</span>
                <span class="nav-label" data-i18n="nav_search">–ü–æ–∏—Å–∫</span>
            </button>
            <button class="nav-btn" data-screen="screen-documents">
                <span class="nav-icon">üìÑ</span>
                <span class="nav-label" data-i18n="nav_docs">–î–æ–∫—É–º–µ–Ω—Ç—ã</span>
            </button>
            <button class="nav-btn" data-screen="screen-profile">
                <span class="nav-icon">üë§</span>
                <span class="nav-label" data-i18n="nav_account">–ê–∫–∫–∞—É–Ω—Ç</span>
            </button>
        </nav>
    </div>

    <!-- Screen: AI Scanner -->
    <div id="screen-ai-scanner" class="screen">
        <div class="container">
            <!-- Header with Back Button -->
            <header class="screen-header">
                <button class="back-btn" onclick="showScreen('screen-home')" aria-label="Back">
                    <span>‚Üê</span>
                </button>
                <h2 class="screen-title" data-i18n="scanner_title">AI –°–∫–∞–Ω–µ—Ä –î–æ–∫—É–º–µ–Ω—Ç–æ–≤</h2>
            </header>

            <!-- Visa Type Selection -->
            <div class="scanner-section">
                <h3 class="section-title" data-i18n="visa_type">–¢–∏–ø –≤–∏–∑—ã</h3>
                <div class="visa-type-selector">
                    <button class="visa-type-btn" data-type="tourist" onclick="selectVisaType('tourist')">
                        <span class="visa-icon">‚úàÔ∏è</span>
                        <span class="visa-label" data-i18n="visa_tourist">–¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è</span>
                    </button>
                    <button class="visa-type-btn" data-type="work" onclick="selectVisaType('work')">
                        <span class="visa-icon">üíº</span>
                        <span class="visa-label" data-i18n="visa_work">–†–∞–±–æ—á–∞—è</span>
                    </button>
                    <button class="visa-type-btn" data-type="student" onclick="selectVisaType('student')">
                        <span class="visa-icon">üéì</span>
                        <span class="visa-label" data-i18n="visa_student">–°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∞—è</span>
                    </button>
                    <button class="visa-type-btn" data-type="business" onclick="selectVisaType('business')">
                        <span class="visa-icon">üè¢</span>
                        <span class="visa-label" data-i18n="visa_business">–ë–∏–∑–Ω–µ—Å</span>
                    </button>
                    <button class="visa-type-btn" data-type="transit" onclick="selectVisaType('transit')">
                        <span class="visa-icon">üöÜ</span>
                        <span class="visa-label" data-i18n="visa_transit">–¢—Ä–∞–Ω–∑–∏—Ç–Ω–∞—è</span>
                    </button>
                </div>
            </div>

            <!-- Country Selection -->
            <div class="scanner-section">
                <h3 class="section-title" data-i18n="dest_country">–°—Ç—Ä–∞–Ω–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è</h3>
                <div class="country-selector">
                    <button class="country-btn" data-country="usa" onclick="selectCountry('usa')">
                        <span class="country-flag">üá∫üá∏</span>
                        <span class="country-name" data-i18n="country_usa">–°–®–ê</span>
                    </button>
                    <button class="country-btn" data-country="uk" onclick="selectCountry('uk')">
                        <span class="country-flag">üá¨üáß</span>
                        <span class="country-name" data-i18n="country_uk">–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è</span>
                    </button>
                    <button class="country-btn" data-country="germany" onclick="selectCountry('germany')">
                        <span class="country-flag">üá©üá™</span>
                        <span class="country-name" data-i18n="country_germany">–ì–µ—Ä–º–∞–Ω–∏—è</span>
                    </button>
                    <button class="country-btn" data-country="france" onclick="selectCountry('france')">
                        <span class="country-flag">üá´üá∑</span>
                        <span class="country-name" data-i18n="country_france">–§—Ä–∞–Ω—Ü–∏—è</span>
                    </button>
                    <button class="country-btn" data-country="canada" onclick="selectCountry('canada')">
                        <span class="country-flag">üá®üá¶</span>
                        <span class="country-name" data-i18n="country_canada">–ö–∞–Ω–∞–¥–∞</span>
                    </button>
                    <button class="country-btn" data-country="japan" onclick="selectCountry('japan')">
                        <span class="country-flag">üáØüáµ</span>
                        <span class="country-name" data-i18n="country_japan">–Ø–ø–æ–Ω–∏—è</span>
                    </button>
                    <button class="country-btn" data-country="south_korea" onclick="selectCountry('south_korea')">
                        <span class="country-flag">üá∞üá∑</span>
                        <span class="country-name" data-i18n="country_korea">–Æ–∂–Ω–∞—è –ö–æ—Ä–µ—è</span>
                    </button>
                    <button class="country-btn" data-country="china" onclick="selectCountry('china')">
                        <span class="country-flag">üá®üá≥</span>
                        <span class="country-name" data-i18n="country_china">–ö–∏—Ç–∞–π</span>
                    </button>
                    <button class="country-btn" data-country="australia" onclick="selectCountry('australia')">
                        <span class="country-flag">üá¶üá∫</span>
                        <span class="country-name" data-i18n="country_australia">–ê–≤—Å—Ç—Ä–∞–ª–∏—è</span>
                    </button>
                    <button class="country-btn" data-country="turkey" onclick="selectCountry('turkey')">
                        <span class="country-flag">üáπüá∑</span>
                        <span class="country-name" data-i18n="country_turkey">–¢—É—Ä—Ü–∏—è</span>
                    </button>
                </div>
            </div>

            <!-- Document Upload -->
            <div class="scanner-section">
                <h3 class="section-title" data-i18n="upload_doc">–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</h3>
                <div class="document-upload-area" id="upload-area">
                    <input type="file" id="document-input" accept="image/*,.pdf" style="display: none;"
                        onchange="handleFileSelect(event)">

                    <video id="camera-preview-inline" autoplay playsinline></video>

                    <div class="camera-controls-inline" id="camera-controls-inline">
                        <button class="primary-btn" onclick="captureFromInlineCamera()">üì∏ –°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ</button>
                        <button class="primary-btn" onclick="stopInlineCamera()"
                            style="background: var(--text-light);">‚úï –ó–∞–∫—Ä—ã—Ç—å</button>
                    </div>

                    <div class="upload-placeholder" onclick="document.getElementById('document-input').click()">
                        <span class="upload-icon">üìé</span>
                        <p class="upload-text" data-i18n="upload_click">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞</p>
                        <p class="upload-hint" data-i18n="upload_camera">–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–º–µ—Ä—É</p>
                    </div>

                    <div class="uploaded-preview" id="uploaded-preview" style="display: none;">
                        <img id="preview-image" src="" alt="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä">
                        <button class="remove-btn" onclick="removeDocument()">‚úï</button>
                    </div>

                    <button class="link-btn" id="open-camera-btn" onclick="startInlineCamera()"
                        style="width: 100%; margin-top: 15px;">
                        üì∑ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–º–µ—Ä—É –Ω–∞–ø—Ä—è–º—É—é
                    </button>
                </div>
            </div>

            <!-- Scan Button -->
            <button class="scan-action-btn" id="scan-btn" onclick="scanDocument()" disabled>
                <span class="scan-btn-icon">üîç</span>
                <span class="scan-btn-text" data-i18n="btn_scan">–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</span>
            </button>

            <!-- Loading State -->
            <div class="scanning-loader" id="scanning-loader" style="display: none;">
                <div class="loader-spinner"></div>
                <p class="loader-text" data-i18n="ai_analyzing">AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç...</p>
            </div>

            <!-- Scan Results -->
            <div class="scan-results" id="scan-results" style="display: none;">
                <!-- Status Badge -->
                <div class="result-status" id="result-status">
                    <div class="status-badge-container">
                        <span class="status-badge" id="status-badge"></span>
                        <span class="status-text" id="status-text"></span>
                    </div>
                </div>

                <!-- Probability Area -->
                <div class="probability-section" id="probability-section" style="display: none;">
                    <h4 class="result-title" data-i18n="approval_probability">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ–¥–æ–±—Ä–µ–Ω–∏—è</h4>
                    <div class="probability-container">
                        <div class="probability-bar" id="probability-bar"></div>
                        <span class="probability-text" id="probability-text">0%</span>
                    </div>
                </div>

                <!-- Found Issues -->
                <div class="issues-section" id="issues-section">
                    <h4 class="result-title" data-i18n="found_issues">–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã</h4>
                    <ul class="issues-list" id="issues-list">
                        <!-- Issues will be dynamically added here -->
                    </ul>
                </div>

                <!-- Requirements for Selected Country -->
                <div class="requirements-section" id="requirements-section">
                    <h4 class="result-title"><span data-i18n="req_for">–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è</span> <span
                            id="selected-country-name"></span></h4>
                    <ul class="requirements-list" id="requirements-list">
                        <!-- Requirements will be dynamically added here -->
                    </ul>
                </div>

                <!-- Missing Documents -->
                <div class="missing-docs-section" id="missing-docs-section">
                    <h4 class="result-title" data-i18n="missing_docs">–ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h4>
                    <ul class="missing-docs-list" id="missing-docs-list">
                        <!-- Missing docs will be dynamically added here -->
                    </ul>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn" data-screen="screen-home">
                <span class="nav-icon">üîç</span>
                <span class="nav-label" data-i18n="nav_search">–ü–æ–∏—Å–∫</span>
            </button>
            <button class="nav-btn" data-screen="screen-documents">
                <span class="nav-icon">üìÑ</span>
                <span class="nav-label" data-i18n="nav_docs">–î–æ–∫—É–º–µ–Ω—Ç—ã</span>
            </button>
            <button class="nav-btn" data-screen="screen-profile">
                <span class="nav-icon">üë§</span>
                <span class="nav-label" data-i18n="nav_account">–ê–∫–∫–∞—É–Ω—Ç</span>
            </button>
        </nav>
    </div>

    <!-- Screen 3: Documents List -->
    <div id="screen-documents" class="screen">
        <div class="container">
            <!-- World Map Header -->
            <div class="world-map">
                <div class="map-placeholder">
                    <svg viewBox="0 0 1000 500" class="world-map-svg" preserveAspectRatio="xMidYMid slice">
                        <path d="M150,200 Q200,100 250,200 T350,200 T450,150 T550,200 T650,250 T750,200 T850,250"
                            fill="none" stroke="rgba(255,255,255,0.4)" stroke-width="2" />
                        <circle cx="200" cy="150" r="4" fill="var(--accent-gold)">
                            <animate attributeName="r" values="3;5;3" dur="2s" repeatCount="indefinite" />
                        </circle>
                        <circle cx="500" cy="200" r="4" fill="white" />
                        <circle cx="800" cy="250" r="4" fill="white" />
                        <path d="M0,400 Q250,350 500,400 T1000,400" fill="none" stroke="rgba(255,255,255,0.1)"
                            stroke-width="40" />
                    </svg>
                </div>
            </div>

            <!-- Document Type Header -->
            <div class="document-header">
                <span class="flag-icon">üá∑üá∫</span>
                <h2 data-i18n="menu_docs">–°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h2>
            </div>

            <!-- Document List -->
            <div class="document-list glass-card">
                <div class="document-item">
                    <div class="document-content">
                        <h4 data-i18n="doc_req_visa">–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º –Ω–∞ –≤–∏–∑—É</h4>
                    </div>
                    <button class="document-action" aria-label="Upload">
                        <span class="action-icon">‚¨ÜÔ∏è</span>
                    </button>
                </div>

                <div class="document-item">
                    <div class="document-content">
                        <h4 data-i18n="doc_temp_id">–í—Ä–µ–º–µ–Ω–Ω–æ–µ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ –ª–∏—á–Ω–æ—Å—Ç–∏</h4>
                    </div>
                    <button class="document-action" aria-label="Upload">
                        <span class="action-icon">‚¨ÜÔ∏è</span>
                    </button>
                </div>

                <div class="document-item">
                    <div class="document-content">
                        <h4 data-i18n="doc_sent">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h4>
                    </div>
                    <button class="document-action" aria-label="Upload">
                        <span class="action-icon">‚¨ÜÔ∏è</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn" data-screen="screen-home">
                <span class="nav-icon">üîç</span>
                <span class="nav-label" data-i18n="nav_search">–ü–æ–∏—Å–∫</span>
            </button>
            <button class="nav-btn active" data-screen="screen-documents">
                <span class="nav-icon">üìÑ</span>
                <span class="nav-label" data-i18n="nav_docs">–î–æ–∫—É–º–µ–Ω—Ç—ã</span>
            </button>
            <button class="nav-btn" data-screen="screen-profile">
                <span class="nav-icon">üë§</span>
                <span class="nav-label" data-i18n="nav_account">–ê–∫–∫–∞—É–Ω—Ç</span>
            </button>
        </nav>
    </div>

    <!-- Screen 4: Help -->
    <div id="screen-help" class="screen">
        <div class="container">
            <!-- Header with Back Button -->
            <header class="screen-header">
                <button class="back-btn" onclick="showScreen('screen-home')" aria-label="Back">
                    <span>‚Üê</span>
                </button>
                <h2 class="screen-title" data-i18n="menu_help">–ü–æ–º–æ—â—å</h2>
            </header>

            <!-- Help Items List -->
            <div class="help-list glass-card">
                <div class="help-item">
                    <div class="help-icon">üìÑ</div>
                    <div class="help-content">
                        <p data-i18n="help_item_1">–¢–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –≤–∏–∑—ã</p>
                    </div>
                    <button class="help-action" aria-label="View">
                        <span class="action-icon">‚Ä∫</span>
                    </button>
                </div>

                <div class="help-item">
                    <div class="help-icon">üìÑ</div>
                    <div class="help-content">
                        <p data-i18n="help_item_2">–ü—Ä–∞–≤–∏–ª–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</p>
                    </div>
                    <button class="help-action" aria-label="View">
                        <span class="action-icon">‚Ä∫</span>
                    </button>
                </div>

                <div class="help-item">
                    <div class="help-icon">üìÑ</div>
                    <div class="help-content">
                        <p data-i18n="help_item_3">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é</p>
                    </div>
                    <button class="help-action" aria-label="View">
                        <span class="action-icon">‚Ä∫</span>
                    </button>
                </div>

                <div class="help-item">
                    <div class="help-icon">üìÑ</div>
                    <div class="help-content">
                        <p data-i18n="help_item_4">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–≤–º–µ—Å—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</p>
                    </div>
                    <button class="help-action" aria-label="View">
                        <span class="action-icon">‚Ä∫</span>
                    </button>
                </div>

                <div class="help-item">
                    <div class="help-icon">üìÑ</div>
                    <div class="help-content">
                        <p data-i18n="help_item_5">–°–≤—è–∑—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</p>
                    </div>
                    <button class="help-action" aria-label="View">
                        <span class="action-icon">‚Ä∫</span>
                    </button>
                </div>

                <div class="help-item">
                    <div class="help-icon">üìÑ</div>
                    <div class="help-content">
                        <p data-i18n="help_item_6">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–¥–∞—á–∞</p>
                    </div>
                    <button class="help-action" aria-label="View">
                        <span class="action-icon">‚Ä∫</span>
                    </button>
                </div>
            </div>

            <!-- Chat Section -->
            <div class="chat-section glass-card">
                <div class="chat-preview">
                    <div class="chat-avatar">üë§</div>
                    <div class="chat-message">
                        <p class="chat-text" data-i18n="chat_welcome">–í–∞–º –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥—ã?</p>
                        <p class="chat-time">16:30</p>
                    </div>
                </div>
                <button class="chat-link" onclick="showScreen('screen-ai-chat')" data-i18n="chat_start">–ù–∞–ø–∏—Å–∞—Ç—å
                    —Å–æ–æ–±—â–µ–Ω–∏–µ...</button>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn" data-screen="screen-home">
                <span class="nav-icon">üîç</span>
                <span class="nav-label" data-i18n="nav_search">–ü–æ–∏—Å–∫</span>
            </button>
            <button class="nav-btn" data-screen="screen-documents">
                <span class="nav-icon">üìÑ</span>
                <span class="nav-label" data-i18n="nav_docs">–î–æ–∫—É–º–µ–Ω—Ç—ã</span>
            </button>
            <button class="nav-btn" data-screen="screen-profile">
                <span class="nav-icon">üë§</span>
                <span class="nav-label" data-i18n="nav_account">–ê–∫–∫–∞—É–Ω—Ç</span>
            </button>
        </nav>
    </div>

    <!-- Screen 5: Profile -->
    <div id="screen-profile" class="screen">
        <div class="container">
            <!-- Header with Back Button -->
            <header class="screen-header">
                <button class="back-btn" onclick="showScreen('screen-home')" aria-label="Back">
                    <span>‚Üê</span>
                </button>
                <h2 class="screen-title" data-i18n="menu_profile">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
            </header>

            <!-- Profile Form -->
            <form class="profile-form">
                <div class="form-group">
                    <label for="name" data-i18n="label_name">–ò–º—è</label>
                    <input type="text" id="name" name="name" placeholder="–ò–º—è" data-i18n="label_name">
                </div>

                <div class="form-group">
                    <label for="email" data-i18n="label_email">Email</label>
                    <input type="email" id="email" name="email" placeholder="Email" data-i18n="label_email">
                </div>

                <div class="form-group">
                    <label for="phone" data-i18n="label_phone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                    <input type="tel" id="phone" name="phone" placeholder="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞" data-i18n="label_phone">
                </div>

                <div class="form-group">
                    <label for="password" data-i18n="label_password">–ü–∞—Ä–æ–ª—å</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="password" name="password" placeholder="" data-i18n="label_password">
                        <button type="button" class="password-toggle" onclick="togglePassword()"
                            aria-label="Toggle password visibility">
                            <span class="eye-icon">üëÅÔ∏è</span>
                        </button>
                    </div>
                </div>

                <button type="button" class="primary-btn" onclick="saveProfile()" data-i18n="btn_save">
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                </button>
            </form>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn" data-screen="screen-home">
                <span class="nav-icon">üîç</span>
                <span class="nav-label" data-i18n="nav_search">–ü–æ–∏—Å–∫</span>
            </button>
            <button class="nav-btn" data-screen="screen-documents">
                <span class="nav-icon">üìÑ</span>
                <span class="nav-label" data-i18n="nav_docs">–î–æ–∫—É–º–µ–Ω—Ç—ã</span>
            </button>
            <button class="nav-btn active" data-screen="screen-profile">
                <span class="nav-icon">üë§</span>
                <span class="nav-label" data-i18n="nav_account">–ê–∫–∫–∞—É–Ω—Ç</span>
            </button>
        </nav>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="settings-modal">
        <div class="settings-content">
            <div class="settings-header">
                <h2 data-i18n="settings_title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <button class="close-settings-btn" onclick="toggleSettings()" aria-label="Close Settings">‚úï</button>
            </div>

            <div class="settings-body">
                <!-- Language Selection -->
                <div class="settings-section">
                    <h3 class="settings-section-title" data-i18n="settings_lang">üåê –°–º–µ–Ω–∞ —è–∑—ã–∫–∞</h3>
                    <p class="settings-description" data-i18n="lang_desc">–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</p>
                    <div class="language-selector">
                        <button class="language-btn active" data-lang="ru" onclick="changeLanguage('ru')">
                            <span class="lang-flag">üá∑üá∫</span>
                            <span class="lang-name">–†—É—Å—Å–∫–∏–π</span>
                        </button>
                        <button class="language-btn" data-lang="en" onclick="changeLanguage('en')">
                            <span class="lang-flag">üá¨üáß</span>
                            <span class="lang-name">English</span>
                        </button>
                        <button class="language-btn" data-lang="es" onclick="changeLanguage('es')">
                            <span class="lang-flag">üá™üá∏</span>
                            <span class="lang-name">Espa√±ol</span>
                        </button>
                        <button class="language-btn" data-lang="fr" onclick="changeLanguage('fr')">
                            <span class="lang-flag">üá´üá∑</span>
                            <span class="lang-name">Fran√ßais</span>
                        </button>
                        <button class="language-btn" data-lang="de" onclick="changeLanguage('de')">
                            <span class="lang-flag">üá©üá™</span>
                            <span class="lang-name">Deutsch</span>
                        </button>
                        <button class="language-btn" data-lang="zh" onclick="changeLanguage('zh')">
                            <span class="lang-flag">üá®üá≥</span>
                            <span class="lang-name">‰∏≠Êñá</span>
                        </button>
                        <button class="language-btn" data-lang="ar" onclick="changeLanguage('ar')">
                            <span class="lang-flag">üá∏üá¶</span>
                            <span class="lang-name">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
                        </button>
                        <button class="language-btn" data-lang="hi" onclick="changeLanguage('hi')">
                            <span class="lang-flag">üáÆüá≥</span>
                            <span class="lang-name">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</span>
                        </button>
                    </div>
                </div>

                <!-- Dark Theme Toggle -->
                <div class="settings-section">
                    <h3 class="settings-section-title" data-i18n="settings_dark">üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞</h3>
                    <p class="settings-description" data-i18n="dark_theme_desc">–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –Ω–æ—á–Ω–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∞–Ω–∫–µ—Ç</p>
                    <div class="toggle-container">
                        <label class="toggle-switch">
                            <input type="checkbox" id="dark-theme-toggle" onchange="toggleDarkTheme()">
                            <span class="toggle-slider"></span>
                        </label>
                        <span class="toggle-label" id="dark-theme-label" data-i18n="off">–í—ã–∫–ª—é—á–µ–Ω–æ</span>
                    </div>
                </div>

                <!-- Notifications Toggle -->
                <div class="settings-section">
                    <h3 class="settings-section-title" data-i18n="settings_notify">üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                    <p class="settings-description" data-i18n="notifications_desc">–ü–æ–ª—É—á–∞–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –≤–∞—à–µ–π
                        –≤–∏–∑—ã</p>
                    <div class="toggle-container">
                        <label class="toggle-switch">
                            <input type="checkbox" id="notifications-toggle" onchange="toggleNotifications()" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <span class="toggle-label" id="notifications-label" data-i18n="on">–í–∫–ª—é—á–µ–Ω–æ</span>
                    </div>
                </div>

                <!-- Gemini AI Settings -->
                <div class="settings-section ai-settings-section">
                    <h3 class="settings-section-title" data-i18n="settings_ai">ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Gemini AI</h3>
                    <p class="settings-description" data-i18n="ai_desc">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º –¥–ª—è —á–∞—Ç–∞ –∏
                        –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. AI
                        –≤—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–µ–Ω.</p>

                    <div class="form-group" style="margin-top: 15px;">
                        <label for="gemini-api-key" style="font-size: 13px;" data-i18n="gemini_key">Gemini API
                            Key</label>
                        <div class="password-input-wrapper">
                            <input type="password" id="gemini-api-key" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à API –∫–ª—é—á..."
                                data-i18n="gemini_placeholder" onchange="saveGeminiKey()">
                            <button type="button" class="password-toggle" onclick="toggleGeminiKeyVis()"
                                aria-label="Toggle API key visibility">
                                <span class="eye-icon">üëÅÔ∏è</span>
                            </button>
                        </div>
                        <p class="settings-hint"><span data-i18n="key_hint">–ö–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –≤–∞—à–µ–º
                                –±—Ä–∞—É–∑–µ—Ä–µ.</span> <a href="https://aistudio.google.com/app/apikey" target="_blank"
                                style="color: #2196F3;" data-i18n="get_key">–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á ‚Üí</a></p>
                    </div>
                </div>

                <!-- Final Close Button -->
                <div class="settings-section" style="margin-top: 20px;">
                    <button class="primary-btn" onclick="toggleSettings()" data-i18n="btn_close_settings">
                        –ì–æ—Ç–æ–≤–æ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Installation Instructions Modal -->
    <div id="install-instructions-modal" class="settings-modal">
        <div class="settings-content">
            <div class="settings-header">
                <h2 data-i18n="install_guide_title">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ</h2>
                <button class="close-settings-btn" onclick="toggleInstallInstructions()"
                    aria-label="Close Instructions">‚úï</button>
            </div>
            <div class="settings-body">
                <div class="install-guide-item">
                    <h4>Android (Chrome)</h4>
                    <p data-i18n="guide_android">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ –≤ —É–≥–ª—É –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
                        –∏–ª–∏ "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω".</p>
                </div>
                <div class="install-guide-item">
                    <h4>iOS (Safari)</h4>
                    <p data-i18n="guide_ios">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" (–∫–≤–∞–¥—Ä–∞—Ç —Å–æ —Å—Ç—Ä–µ–ª–∫–æ–π) –∏ –≤—ã–±–µ—Ä–∏—Ç–µ "–ù–∞ —ç–∫—Ä–∞–Ω
                        ¬´–î–æ–º–æ–π¬ª".</p>
                </div>
                <div class="install-guide-item">
                    <h4>Desktop (Chrome/Edge)</h4>
                    <p data-i18n="guide_desktop">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É –º–æ–Ω–∏—Ç–æ—Ä–∞ —Å–æ —Å—Ç—Ä–µ–ª–∫–æ–π –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –±—Ä–∞—É–∑–µ—Ä–∞.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Screen 6: AI Chat Assistant -->
    <div id="screen-ai-chat" class="screen">
        <div class="container chat-container-full">
            <!-- Header with Back Button -->
            <header class="screen-header chat-header">
                <button class="back-btn" onclick="showScreen('screen-help')" aria-label="Back">
                    <span>‚Üê</span>
                </button>
                <div class="header-info">
                    <h2 class="screen-title" data-i18n="ai_assistant_title">–ò–ò –ü–æ–º–æ—â–Ω–∏–∫</h2>
                    <span class="status-online" data-i18n="status_online">–≤ —Å–µ—Ç–∏</span>
                </div>
            </header>

            <!-- Chat Messages Area -->
            <div id="chat-messages" class="chat-messages">
                <div class="message ai-message">
                    <div class="message-avatar">ü§ñ</div>
                    <div class="message-content">
                        <p data-i18n="chat_welcome_ai">–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –≤–∞—à –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –≤–∏–∑. –ß–µ–º —è –º–æ–≥—É –≤–∞–º
                            –ø–æ–º–æ—á—å —Å–µ–≥–æ–¥–Ω—è?</p>
                        <span class="message-time">16:45</span>
                    </div>
                </div>
            </div>

            <!-- Chat Input Area -->
            <div class="chat-input-area">
                <div class="input-wrapper">
                    <input type="text" id="chat-user-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                        data-i18n="chat_input_placeholder">
                    <button id="chat-send-btn" class="send-btn" onclick="handleSendMessage()" aria-label="Send Message">
                        <span class="send-icon">‚û§</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Document Viewer Modal -->
    <div id="document-viewer-modal" class="settings-modal">
        <div class="settings-content document-viewer-content">
            <div class="settings-header">
                <h2 id="viewer-title" data-i18n="viewer_title">–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞</h2>
                <button class="close-settings-btn" onclick="closeDocumentViewer()" aria-label="Close Viewer">‚úï</button>
            </div>
            <div class="settings-body document-viewer-body">
                <div class="viewer-image-container">
                    <img id="viewer-image" src="" alt="–î–æ–∫—É–º–µ–Ω—Ç" class="viewer-image">
                </div>
                <div class="viewer-metadata">
                    <div id="viewer-status" class="viewer-status"></div>
                    <div id="viewer-meta" class="viewer-meta"></div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="js/app.js"></script>
    <script type="module" src="js/enhanced-integration.js"></script>
</body>

</html>